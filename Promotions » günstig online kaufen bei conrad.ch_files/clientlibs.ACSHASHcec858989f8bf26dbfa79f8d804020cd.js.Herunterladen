"use strict";(self.ccpJsonpWebpack=self.ccpJsonpWebpack||[]).push([[4511],{1819:function(e,t,a){var r=a(121),o=a.n(r),n=a(1411),i=a(217),c=a(4661),s=a(2203),d=a(9850),l=a(3128),g=a(543);const p=(0,n.A)("ccp.site.basepage");"DSP_HOMEPAGE"!==c.wk.type&&(async()=>{if("serviceWorker"in navigator)try{if(navigator.userAgent.includes(" Edge/")){const e=await navigator.serviceWorker.getRegistration();e&&e.active&&e.active.scriptURL&&e.active.scriptURL.includes("/sw.js")&&(e.unregister(),p.log.info("ServiceWorker deactivated in Edge."))}else window.addEventListener("load",(async()=>{try{const e=c.configuration.additionalServiceWorkerUrls?`?s=${c.configuration.additionalServiceWorkerUrls}`:"";await navigator.serviceWorker.register(`/sw.js${e}`,{}),p.log.info("ServiceWorker registered.")}catch(e){p.log.warn(`ServiceWorker registration failed: ${e}`)}}))}catch(e){p.log.warn(`ServiceWorker preparation failed: ${e}`)}else p.log.info("ServiceWorker not supported.")})();const u="bestnr",h="offerId",w="p_b_a",f="p_b_q",m="p_b_o",y="p_b_i",v="gvlon",$="actionCode",W="ac",b=[u,h,w,f,m,y,v],k="p_bsark",S=new URL(window.location.href).searchParams,_=async()=>{if(!window.location.pathname.endsWith(".redirectcart.html")&&!window.location.pathname.endsWith(".addproduct.html"))return;let e;p.log.debug("start analysing cart parameters"),window.location.pathname.startsWith(c.configuration.cartPage.replace(".html",""))||(window.location.href=c.configuration.cartPage.replace(".html",".addproduct.html")+window.location.search),S.has(u)?(p.log.debug("handling single product parameters"),e=[{productNumber:S.get(u),offerId:S.get(h)}]):(p.log.debug("handling multi product parameters"),e=Array.from(S.keys()).filter((e=>e.startsWith(w))).map((e=>(e=>({productNumber:S.get(`${w}${e}`),quantity:S.get(`${f}${e}`),offerId:S.get(`${m}${e}`),insertCode:S.get(`${y}${e}`),chosenWarrantyExtension:S.get(`${v}${e}`)?"48":""}))(e.substring(5))))),history.replaceState(null,"",`${c.configuration.cartPage}${(()=>{Array.from(S.keys()).filter((e=>b.some((t=>e.startsWith(t))))).forEach((e=>S.delete(e)));const e=S.toString();return e?`?${e}`:""})()}${window.location.hash}`),p.log.debug("adding products"),await(0,s.WQ)(e,{})},A=async()=>{(()=>{if(!S.has(k))return;const e=S.get(k).match(/^(D_[\w]{2})_(ZP[\d]{2})$/);if(e){const[,t,a]=e;(0,d.DK)({orderType:t,paymentType:a})}S.delete(k);const t=S.toString();history.replaceState(null,"",window.location.pathname+(t?`?${t}`:"")+window.location.hash)})(),await(0,s.R7)(),await _(),await(async()=>{if(!S.has($)&&!S.has(W))return;p.log.debug("adding action code"),await(0,s.xV)(S.get($)||S.get(W)),S.delete($),S.delete(W);const e=S.toString();history.replaceState(null,"",window.location.pathname+(e?`?${e}`:"")+window.location.hash)})(),(0,s.QU)()};"DSP_HOMEPAGE"!==c.wk.type&&(A(),(0,g.t)((e=>e.forEach((e=>(0,l.A)(e)))))),"complete"==document.readyState?(0,i.AR)():document.onreadystatechange=function(){"complete"===document.readyState&&(0,i.AR)()},window.onhashchange=i.AR,o()((()=>{(0,l.A)(),setTimeout((()=>{(0,s.NO)()}),0)}))},1037:function(e){e.exports=ccpConf},4068:function(e){e.exports=ccpPageType}},function(e){e.O(0,[3666],(function(){return t=1819,e(e.s=t);var t}));e.O()}]);